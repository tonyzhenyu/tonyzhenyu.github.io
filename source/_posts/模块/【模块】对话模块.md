# 对话模块

### 文本模板设计

### 文本符号
- 花括号{}.花括号为段落.
- 方括号[].方括号里的内容为程序集种的函数.
- 圆括号().表达参数.
- \# 代表全局变量.统一加ToString的方法

### 流程
初始化把所有的关键字和函数，反射一次，建立起函数和字符串的关联。之后如果使用到相关函数，直接可以用字符串匹配。

### 功能
- 读取解释器

### 存放位置
储存在动态资源库StreamAssets

#### 函数
- [TaskID(TaskID,NPCID)]
- [Dialog(NPCID)]
- [Ask(NPCID)]
- [Case]
- [AddTaskID(TaskID)]
- [AddItem(ItemID,Number)]

#### 关键字
- if 
- else
- Switch
- case

### 笔记
- API文档
- 用户手册
- 添加函数

### 文本结构

```
TaskID(1,3)
{
    [Dialog(3)]那个谁站住别走!
    [Dialog(4)]刚下火车是吗?
    [Ask(4)]你从上海来吗?{
        [Case]上海{
            [Dialog(4)]那这个给你。
            [AddItem(隔离券,14)]
            [Dialog(4)]你跟着那边的人走吧。
            [AddTaskID(2;3)]
        }
        [Case]其他地方{
            [Dialog(4)]请出示48小时内的核酸证明
            [Dialog(#CurrentNPC#)]#CurrentNPC.Name#检查了你的核酸检测报告
            if [Action(#HeSuan#)]{
                [Dialog]你自由了
                [AddTaskID(4)]
            }
            else{
                [Dialog]你寄了
                [AddTaskID(5)]
            }
            Switch(#HeSuan#){
                Case(Green){
                    [Dialog]你自由了
                    [AddTaskID(4)]
                }
                Case(Red){
                    [Dialog]你寄了
                    [AddTaskID(5)]
                }
            }
        }
    }
}
```

```
那个谁站住别走!
...
刚下火车是吗?
...
你从上海来吗?
    - 上海
    - 其他地方
选择上海
...
那这个给你
...
获得物品隔离券14个
...
你跟着那边的人走吧
...

选择其他地方
...
请出示48小时内核酸证明
...
当前npc检查了你的核酸检测报告
...
你自由了

```